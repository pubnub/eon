<html>
  <head>
    <link href="../css/c3.css" rel="stylesheet" type="text/css">
    <script src="http://cdn.pubnub.com/pubnub.min.js"></script>
  </head>
  <body>
    <div id="chart"></div>

    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="../js/c3.js"></script>
    <script src="../js/pubnub-c3.js"></script>
    <script>

      var chart = pubnubC3({
        channel: "c3-guage",
        generate: {
          bindto: '#chart',
          data: {
            columns: [
              ['data', 0]
            ],
            type: 'gauge',
          },
          gauge: {
            min: 0,
            max: 100
          },
          color: {
            pattern: ['#FF0000', '#F6C600', '#60B044'], 
            threshold: {
              values: [30, 60, 90]
            }
          }
        }
      });

      var pubnub2 = PUBNUB.init({
        publish_key: 'demo',
        subscribe_key: 'demo'
      });

      setInterval(function(){
        
        pubnub2.publish({
          channel: 'c3-guage',
          message: {
            columns: [['data', Math.random() * 99]]
          }
        })

      }, 1000);

    </script>
  </body>
</html>
